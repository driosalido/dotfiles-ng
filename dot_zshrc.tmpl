# Zsh configuration for {{ .name }}
# Platform: {{ if .is_macos }}macOS{{ else if .is_linux }}Linux{{ else }}{{ .chezmoi.os }}{{ end }}

# XDG Base Directory Specification
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
export XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
export XDG_STATE_HOME="${XDG_STATE_HOME:-$HOME/.local/state}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-$HOME/.cache}"

{{- if .has_ohmyzsh }}
# Oh My Zsh configuration (XDG compliant)
export ZSH="$XDG_DATA_HOME/oh-my-zsh"

# Set theme
ZSH_THEME="robbyrussell"

# Plugins
plugins=(
    git
    zsh-autosuggestions
    zsh-syntax-highlighting
    colored-man-pages
    {{- if .is_macos }}
    brew
    macos
    {{- end }}
    {{- if .is_linux }}
    ubuntu
    {{- end }}
)

# Load Oh My Zsh
source $ZSH/oh-my-zsh.sh
{{- else }}
# Basic Zsh configuration (without Oh My Zsh)

# History configuration (XDG compliant)
HISTFILE="$XDG_STATE_HOME/zsh/history"
HISTSIZE=10000
SAVEHIST=10000
setopt APPEND_HISTORY
setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_REDUCE_BLANKS
setopt HIST_IGNORE_SPACE

# Basic options
setopt AUTO_CD              # Change directory just by typing dirname
setopt CORRECT              # Auto correct mistakes
setopt GLOB_DOTS            # Include dotfiles in globbing

# Completion system
autoload -Uz compinit
compinit

# Basic prompt
PROMPT='%F{green}%n@%m%f:%F{blue}%~%f$ '
{{- end }}

# Platform-specific PATH and configurations
{{- if .is_macos }}
# macOS specific settings
export PATH="/opt/homebrew/bin:/usr/local/bin:$PATH"

# macOS aliases
alias ls='ls -G'
alias ll='ls -lG'
alias la='ls -laG'
{{- end }}

{{- if .is_linux }}
# Linux specific settings
export PATH="/usr/local/bin:$PATH"

# Linux aliases
alias ls='ls --color=auto'
alias ll='ls -l --color=auto'
alias la='ls -la --color=auto'
{{- end }}

# Common aliases
alias grep='grep --color=auto'
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias h='history'
alias c='clear'
alias reload='source ~/.zshrc'

# Git aliases (complement .gitconfig)
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git log --oneline'
alias gd='git diff'
alias gb='git branch'
alias gco='git checkout'

# Directory navigation
alias ~='cd ~'
alias /='cd /'

# Common tools
alias df='df -h'
alias du='du -h'
alias free='free -h'
alias ps='ps aux'

# Editor
export EDITOR=vim
export VISUAL=vim

# Load local customizations if they exist
[[ -f ~/.zshrc.local ]] && source ~/.zshrc.local